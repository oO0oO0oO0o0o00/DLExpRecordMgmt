<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Experiment Records</title>
    <link rel="stylesheet" th:href="@{~/bootstrap-4.5.3-dist/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{~/css/sidebar.css}"/>
    <link rel="stylesheet" th:href="@{~/chart.js-2.9.4/Chart.min.css}">
    <script th:src="@{~/js/jquery-3.5.1.min.js}"></script>
    <script th:src="@{~/bootstrap-4.5.3-dist/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{~/chart.js-2.9.4/Chart.min.js}"></script>
    <script th:if="${null!=selectedRecord}">
        var page = 1;
        var max_page = [[${selectedRecord.folds}]];
    </script>
    <script th:src="@{~/js/index.js}"></script>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" th:classappend="${selectedRecord eq null} ? 'active'" href="?">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                 class="feather feather-home">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>
                            Dashboard
                            <span class="sr-only" th:if="${selectedRecord eq null}">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item" th:each="record: ${records}">
                        <a class="nav-link" th:classappend="${record eq selectedRecordName} ? 'active'"
                           th:href="@{/(selected-record=${record})}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round"
                                 class="feather feather-file">
                                <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                                <polyline points="13 2 13 9 20 9"></polyline>
                            </svg>
                            <th:block th:text="${record}"/>
                            <span class="sr-only" th:if="${record eq selectedRecordName}">(current)</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
            QWERT
            <div>123</div>
            <th:block th:if="${selectedRecord ne null}">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Metric</th>
                    <th scope="col" th:each="i: ${#numbers.sequence(1, selectedRecord.folds)}" th:text="${i}"></th>
                    <th scope="col">Average</th>
                </tr>
                </thead>
                <tbody>
                <th:block th:each="metric: ${selectedRecord.metrics}" th:with="fracs=${metric eq 'loss' ? 2 : 3}">
                <tr>
                    <th scope="row" th:text="${metric}"></th>
                    <td th:each="i: ${#numbers.sequence(0, selectedRecord.folds - 1)}">
                        <th:block
                                th:text="${#numbers.formatDecimal(selectedRecord.listOfFinalScores.get(i).get(metric).mean,0,fracs)}"/>
                    </td>
                    <td>
                        <th:block
                                th:text="${#numbers.formatDecimal(selectedRecord.averagedFinalScores.get(metric).mean,0,fracs)}"/>
                    </td>
                </tr>
                <tr>
                    <th scope="row"><span class="sr-only" th:text="${'std of ' + metric}"></span></th>
                    <td th:each="i: ${#numbers.sequence(0, selectedRecord.folds - 1)}">±
                        <th:block
                                th:text="${#numbers.formatDecimal(selectedRecord.listOfFinalScores.get(i).get(metric).std,0,fracs)}"/>
                    </td>
                    <td>±
                        <th:block
                                th:text="${#numbers.formatDecimal(selectedRecord.averagedFinalScores.get(metric).std,0,fracs)}"/>
                    </td>
                </tr>
                </th:block>
                </tbody>
            </table>
            <nav aria-label="Page navigation indicating which fold it is of among k-fold validation results.">
                <ul class="pagination" id="pagination">
                    <li class="page-item disabled page-previous">
                        <a class="page-link" href="javascript:void(0)" tabindex="-1" onclick="setPage('<')" aria-label="Previous" aria-disabled="true">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li th:each="i: ${#numbers.sequence(1, selectedRecord.folds)}" class="page-item page-number" th:attr="page-number=${i}"
                        th:attrappend="aria-current=${i eq 1}?'page'">
                        <a class="page-link" href="javascript:void(0)" th:onclick="|setPage(${i})|">
                            <th:block th:text="${i}"/>
                            <span class="sr-only" th:if="${1 eq i}">(current)</span>
                        </a>
                    </li>
                    <li class="page-item page-next">
                        <a class="page-link" href="javascript:void(0)" onclick="setPage('>')" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <a style="display:none" id="req-detail-href" th:href="@{/detail}" th:attr="data=${selectedRecordName}"></a>
            <div class="row">
                <div class="col-sm-6" id="charts-1">
                </div>
                <div class="col-sm-6" id="charts-2">
                </div>
                <div class="col-sm-6" id="charts-3">
                </div>
                <div class="col-sm-6" id="charts-4">
                </div>
            </div>
            </th:block>
        </main>
    </div>
</div>
</body>
</html>